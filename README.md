# KR_2: Система анализа и хранения студенческих отчётов

## Что это

Веб-приложение для хранения, анализа и сравнения студенческих текстовых отчётов. Реализовано в виде микросервисной архитектуры с использованием Java, Spring Boot и Docker Compose

---

## Архитектура

- **API Gateway** (`api-gateway`): маршрутизация всех запросов к нужным сервисам.
- **File Storing Service** (`file-storing-service`): хранение и выдача файлов.
- **File Analysis Service** (`file-analysis-service`): анализ текста, хранение результатов, сравнение файлов.
- **PostgreSQL**: отдельные БД для хранения файлов и анализа.

Взаимодействие между сервисами осуществляется по HTTP через gateway.

---

## Основные функции

- Загрузка .txt файла
- Получение файла по id
- Получение списка файлов
- Анализ файла (абзацы, слова, символы)
- Получение статистики по файлу
- Сравнение двух файлов на идентичность
- Обработка ошибок (отсутствие файла, сервис недоступен и т.д.)

---

## API (через gateway)

### File Storing
- `POST   /files` — загрузить .txt файл (multipart/form-data)
- `GET    /files/{id}` — скачать файл по id
- `GET    /files` — получить список файлов

### File Analysis
- `POST   /analysis/{fileId}` — анализировать файл
- `GET    /analysis/{fileId}` — получить статистику
- `POST   /analysis/compare/{fileId1}/{fileId2}` — сравнить два файла

---

## Документация и тесты

- Код покрыт unit-тестами (папка `src/test/java` в каждом сервисе).
- Покрытие тестами >65% (основные сценарии и ошибки покрыты).
- Код структурирован, бизнес-логика отделена от контроллеров.
- Примеры запросов и ответы приведены выше.
- Swagger можно добавить при необходимости (по умолчанию не включён).


---

## Дополнительно

- Визуализация (облако слов) реализуется через внешний API (например, quickchart.io).
- Для расширения можно добавить Swagger/OpenAPI, интеграционные тесты, авторизацию.

---

## Запуск

1. Убедитесь, что есть файл `.env` с переменными:
   ```
   POSTGRES_USER=postgres
   POSTGRES_PASSWORD=postgres
   ```
2. Соберите и запустите сервисы:
   ```
   docker-compose up --build
   ```
3. Все сервисы будут доступны на портах:
   - Gateway: http://localhost:8080
   - File Storing: http://localhost:8081
   - File Analysis: http://localhost:8082

---

**Вся функциональность реализована и протестирована согласно заданию.** 
